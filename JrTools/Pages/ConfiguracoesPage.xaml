<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="JrTools.Pages.ConfiguracoesPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:JrTools.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>
        <!-- Estilo base dos cards -->
        <Style x:Key="ResponsiveCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorDefaultBrush}"/>
            <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="MinWidth" Value="320"/>
        </Style>
    </Page.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="16">
        <StackPanel Spacing="16">
            <!-- Cabeçalho -->
            <TextBlock Text="Configurações" Style="{ThemeResource TitleTextBlockStyle}" />
            <InfoBar x:Name="ValidationInfoBar" IsOpen="False" Severity="Error" Margin="0,0,8,0"/>

            <!-- GRID RESPONSIVO -->
            <Grid x:Name="ResponsiveGrid" ColumnSpacing="16" RowSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Primeiro card -->
                <Border Style="{StaticResource ResponsiveCardStyle}" Grid.Column="0">
                    <StackPanel Spacing="20">
                        <TextBlock Text="Parametrizações" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <TextBox x:Name="DiretorioBinarios" Header="Diretório binários Delphi"
                                 Text="D:\Benner\bin" TextChanged="DiretorioBinarios_TextChanged"/>
                        <TextBox x:Name="DiretorioProducao" Header="Diretório de produção"
                                 Text="D:\Benner\fontes\rh\prod" TextChanged="DiretorioProducao_TextChanged"/>
                        <TextBox x:Name="DiretorioEspesificos" Header="Diretórios específicos"
                                 Text="D:\Benner\fontes\rh" TextChanged="DiretorioEspesificos_TextChanged"/>
                    </StackPanel>
                </Border>

                <!-- Segundo card -->
                <Border Style="{StaticResource ResponsiveCardStyle}" Grid.Column="1">
                    <StackPanel Spacing="20">

                        <!-- Login normal -->
                        <TextBox x:Name="LoginRhWeb" Header="Login MyPlace" TextChanged="DadosPessoais_TextChanged"/>

                        <!-- Senha MyPlace -->
                        <Grid>
                            <PasswordBox x:Name="SenhaRhWeb" Header="Senha MyPlace" PasswordChanged="SenhaSiteJR_PasswordChanged"/>
                            <TextBox x:Name="SenhaRhWebVisible" Visibility="Collapsed" Header="Senha MyPlace" TextChanged="SenhaSiteJR_PasswordChanged"/>
                            <Button
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    Width="40"
                                    Click="ToggleSenhaVisibility_Click">
                                <FontIcon Glyph="&#xE890;" />
                            </Button>
                        </Grid>

                        <TextBox x:Name="UrlRhWeb" Header="Url Rhweb " TextChanged="DadosPessoais_TextChanged" Text="https://rh.portalbenner.com.br/RHWEB"/>
                        <!-- Token API Gemini -->
                        <Grid>
                            <PasswordBox x:Name="ApiGeminiPasswordBox" Header="Token Api Gemini"  PasswordChanged="ApiTokenGemini_PasswordChanged"/>
                            <TextBox x:Name="ApiGeminiVisible" Visibility="Collapsed" Header="Token Api Gemini" TextChanged="ApiTokenGemini_PasswordChanged"/>
                            <Button 
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    Width="40"
                                    Click="ToggleApiGeminiVisibility_Click">
                                <FontIcon Glyph="&#xE890;" />
                            </Button>
                        </Grid>

                        <!-- Token API Toggl -->
                        <Grid>
                            <PasswordBox x:Name="ApiTogglPasswordBox" Header="Token Api Toggl" PasswordChanged="ApiToggl_PasswordChanged"/>
                            <TextBox x:Name="ApiTogglVisible" Visibility="Collapsed" Header="Token Api Toggl"  TextChanged="ApiToggl_PasswordChanged"/>
                            <Button 
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    Width="40"
                                    Click="ToggleApiTogglVisibility_Click">
                                <FontIcon Glyph="&#xE890;" />
                            </Button>
                        </Grid>

                    </StackPanel>
                </Border>
            </Grid>
        </StackPanel>
    </ScrollViewer>

    <!-- ESTADOS RESPONSIVOS -->
    <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="WindowStates">
            <VisualState x:Name="WideState">
                <VisualState.StateTriggers>
                    <AdaptiveTrigger MinWindowWidth="700" />
                </VisualState.StateTriggers>
                <VisualState.Setters>
                    <Setter Target="ResponsiveGrid.(Grid.RowDefinitions)" Value="Auto" />
                    <Setter Target="ResponsiveGrid.(Grid.ColumnDefinitions)" Value="*,*" />
                    <Setter Target="ResponsiveGrid.Children[0].(Grid.Row)" Value="0" />
                    <Setter Target="ResponsiveGrid.Children[0].(Grid.Column)" Value="0" />
                    <Setter Target="ResponsiveGrid.Children[1].(Grid.Row)" Value="0" />
                    <Setter Target="ResponsiveGrid.Children[1].(Grid.Column)" Value="1" />
                </VisualState.Setters>
            </VisualState>

            <VisualState x:Name="NarrowState">
                <VisualState.StateTriggers>
                    <AdaptiveTrigger MinWindowWidth="0" />
                </VisualState.StateTriggers>
                <VisualState.Setters>
                    <Setter Target="ResponsiveGrid.(Grid.ColumnDefinitions)" Value="*" />
                    <Setter Target="ResponsiveGrid.Children[0].(Grid.Row)" Value="0" />
                    <Setter Target="ResponsiveGrid.Children[0].(Grid.Column)" Value="0" />
                    <Setter Target="ResponsiveGrid.Children[1].(Grid.Row)" Value="1" />
                    <Setter Target="ResponsiveGrid.Children[1].(Grid.Column)" Value="0" />
                </VisualState.Setters>
            </VisualState>

        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
</Page>
